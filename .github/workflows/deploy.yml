name: ðŸš€ Deploy ke Rumahweb (peduli.albarokah.org)

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ“¦ Checkout kode
        uses: actions/checkout@v4

      - name: ðŸ§¾ List file yang akan diupload (debug)
        run: |
          echo "=== Daftar file di direktori kerja ==="
          ls -R

      - name: ðŸš€ Upload file ke Rumahweb via SCP
        uses: appleboy/scp-action@v0.1.7
        with:
          host: ${{ secrets.SSH_HOST }}
          username: ${{ secrets.SSH_USER }}
          key: ${{ secrets.SSH_PRIVATE_KEY }}
          port: ${{ secrets.SSH_PORT }}
          source: "./"
          target: "/home/albc5351/public_html/peduli.albarokah.org"
          # jangan ada 'rm: true' lagi ya
          exclude: |
            .git*
            .github*
            .env*
            node_modules*
            vendor*
            README.md
            deploy.yml
            *.log
            *.bak
